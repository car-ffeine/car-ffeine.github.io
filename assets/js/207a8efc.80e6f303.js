"use strict";(self.webpackChunkcar_ffeine=self.webpackChunkcar_ffeine||[]).push([[1416],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=s(n),k=r,g=d["".concat(i,".").concat(k)]||d[k]||u[k]||o;return n?a.createElement(g,l(l({ref:t},p),{},{components:n})):a.createElement(g,l({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=k;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c[d]="string"==typeof e?e:r,l[1]=c;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},92994:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const o={slug:23,title:"Deadlock trouble shooting",authors:["boxster"],tags:["deadlock","trouble-shooting"]},l=void 0,c={permalink:"/23",source:"@site/blog/2023-07-31-deadlokc-trouble-shooting.mdx",title:"Deadlock trouble shooting",description:"\uc774 \uae00\uc744 \uc4f0\ub294 \uc774\uc720",date:"2023-07-31T00:00:00.000Z",formattedDate:"2023\ub144 7\uc6d4 31\uc77c",tags:[{label:"deadlock",permalink:"/tags/deadlock"},{label:"trouble-shooting",permalink:"/tags/trouble-shooting"}],readingTime:12.565,hasTruncateMarker:!1,authors:[{name:"\ubc15\uc2a4\ud130",title:"Backend",url:"https://github.com/drunkenhw",imageURL:"https://github.com/drunkenhw.png",key:"boxster"}],frontMatter:{slug:"23",title:"Deadlock trouble shooting",authors:["boxster"],tags:["deadlock","trouble-shooting"]},prevItem:{title:"Out of memory trouble shooting",permalink:"/24"},nextItem:{title:"\ud544\ud130\ub9c1 \uae30\ub2a5 \uad6c\ud604\uacfc \uc778\ub371\uc2a4 \uc774\uc6a9\ud55c \uc870\ud68c \uc18d\ub3c4 \uac1c\uc120\ud558\uae30",permalink:"/22"}},i={authorsImageUrls:[void 0]},s=[{value:"\uc774 \uae00\uc744 \uc4f0\ub294 \uc774\uc720",id:"\uc774-\uae00\uc744-\uc4f0\ub294-\uc774\uc720",level:2},{value:"Mysql Dead Lock\uc774\ub780",id:"mysql-dead-lock\uc774\ub780",level:2},{value:"\uc800\ud76c \ud300\uc5d0 \ub370\ub4dc\ub77d\uc774 \ubc1c\uc0dd\ud55c \uc774\uc720",id:"\uc800\ud76c-\ud300\uc5d0-\ub370\ub4dc\ub77d\uc774-\ubc1c\uc0dd\ud55c-\uc774\uc720",level:3},{value:"\ud574\uacb0 \ubc29\uc548",id:"\ud574\uacb0-\ubc29\uc548",level:3}],p={toc:s},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\uc774-\uae00\uc744-\uc4f0\ub294-\uc774\uc720"},"\uc774 \uae00\uc744 \uc4f0\ub294 \uc774\uc720"),(0,r.kt)("p",null,"\uba3c\uc800 \uc774 \uae00\uc744 \uc4f0\ub294 \uc774\uc720\ub294 \uc800\ud76c \uce74\ud398\uc778 \ud300\uc758 \ud63c\uc7a1\ub3c4 \uc800\uc7a5 \ubc0f \ucda9\uc804\uae30\uc758 \uc0c1\ud0dc\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\ub294 \ub85c\uc9c1\uc5d0\uc11c dead Lock\uc774 \ubc1c\uc0dd\ud558\uc5ec mysql\uacfc connection\uc744 \uc783\ub294 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------\nLATEST DETECTED DEADLock\n------------------------\n2023-07-21 01:49:54 281472560787424\n*** (1) TRANSACTION:\nTRANSACTION 1000560, ACTIVE 373 sec inserting\nmysql tables in use 1, Locked 1\nLock WAIT 3 Lock struct(s), heap size 1128, 9 row Lock(s), undo log entries 328\nMySQL thread id 860, OS thread handle 281472107409376, query id 2958720 update\nINSERT INTO charger_status (station_id, charger_id, latest_update_time, charger_state) VALUES ('ST414511', '01', '2023-07-21 08:27:43', 'CHARGING_IN_PROGRESS') ON DUPLICATE KEY UPDATE latest_update_time = '2023-07-21 08:27:43', charger_state = 'CHARGING_IN_PROGRESS'\n\n*** (1) HOLDS THE Lock(S):\nRECORD LockS space id 64 page no 742 n bits 424 index PRIMARY of table `charge`.`charger_status` trx id 1000560 Lock_mode X Locks rec but not gap\n\n*** (1) WAITING FOR THIS Lock TO BE GRANTED:\nRECORD LockS space id 64 page no 718 n bits 280 index PRIMARY of table `charge`.`charger_status` trx id 1000560 Lock_mode X Locks rec but not gap waiting\n\n*** (2) TRANSACTION:\nTRANSACTION 946331, ACTIVE 507 sec inserting\nmysql tables in use 1, Locked 1\nLock WAIT 4 Lock struct(s), heap size 1323, 12 row Lock(s), undo log entries 432\nMySQL thread id 859, OS thread handle 281472629186528, query id 3017483 update\nINSERT INTO charger_status (station_id, charger_id, latest_update_time, charger_state) VALUES ('ST412801', '11', '2023-07-21 10:48:20', 'CHARGING_IN_PROGRESS') ON DUPLICATE KEY UPDATE latest_update_time = '2023-07-21 10:48:20', charger_state = 'CHARGING_IN_PROGRESS'\n\n*** (2) HOLDS THE Lock(S):\nRECORD LockS space id 64 page no 718 n bits 208 index PRIMARY of table `charge`.`charger_status` trx id 946331 Lock_mode X Locks rec but not gap\n\n*** (2) WAITING FOR THIS Lock TO BE GRANTED:\nRECORD LockS space id 64 page no 742 n bits 424 index PRIMARY of table `charge`.`charger_status` trx id 946331 Lock_mode X Locks rec but not gap waiting\n\n\n")),(0,r.kt)("p",null,"\uc2e4\uc81c ",(0,r.kt)("strong",{parentName:"p"},"\uac1c\ubc1c \uc11c\ubc84"),"\uc5d0\uc11c \ubc1c\uc0dd\ud55c \ub370\ub4dc\ub77d\uc758 \ub85c\uadf8\uc785\ub2c8\ub2e4. \ud574\ub2f9 \ub85c\uadf8\ub294 charger_status\uc5d0 \uc800\uc7a5 \uc2dc \uc11c\ub85c XLock\uc744 \ud68d\ub4dd\ud558\uc9c0 \ubabb\ud558\uc5ec \uc0dd\uae30\ub294 \uc5d0\ub7ec\uc785\ub2c8\ub2e4."),(0,r.kt)("h2",{id:"mysql-dead-lock\uc774\ub780"},"Mysql Dead Lock\uc774\ub780"),(0,r.kt)("p",null,"\uadf8\ub7fc Dead Lock\uc740 \uc65c \uc0dd\uae30\uace0 \uc5b8\uc81c \uc0dd\uae38\uae4c\uc694?\n\uc800\ub294 \uc774 Log\ub97c \uc9c1\uc811 \ub9c8\uc8fc\ud558\uae30 \uc804\uae4c\uc9c0\ub294 Dead Lock\uc774 \uadf8\ub0e5 Lock\uc758 \uc2dc\uac04\uc774 \uc624\ub798 \uac78\ub9b4 \ub54c \uc0dd\uae30\ub294 \uc904 \uc54c\uc558\uc2b5\ub2c8\ub2e4. \ud558\uc9c0\ub9cc \uadf8\ub807\uac8c \uac04\ub2e8\ud558\uac8c \ubc1c\uc0dd\ud558\ub294 \uac83\uc740 \uc544\ub2c8\uc600\uc2b5\ub2c8\ub2e4."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\uc0c1\ud638 \ubc30\uc81c(Mutual Exclusion): MySQL\uc740 \uae30\ubcf8\uc801\uc73c\ub85c \ud2b8\ub79c\uc7ad\uc158 \ub0b4\uc5d0\uc11c \uc7a0\uae08(Lock)\uc744 \uc0ac\uc6a9\ud558\uc5ec \ub370\uc774\ud130\uc758 \uc0c1\ud638 \ubc30\uc81c\ub97c \uc81c\uc5b4\ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c \ub450 \uac1c \uc774\uc0c1\uc758 \ud2b8\ub79c\uc7ad\uc158\uc774 \uac19\uc740 \ub370\uc774\ud130\ub97c \ub3d9\uc2dc\uc5d0 \ubcc0\uacbd\ud558\ub824\uace0 \ud560 \ub54c, \ud574\ub2f9 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \uc7a0\uae08\uc774 \uc124\uc815\ub418\uc5b4 \uc0c1\ud638 \ubc30\uc81c \uc870\uac74\uc774 \ub9cc\uc871\ub429\ub2c8\ub2e4.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\uc810\uc720\uc640 \ub300\uae30(Hold and Wait): \ud2b8\ub79c\uc7ad\uc158\uc774 \uc774\ubbf8 \ud558\ub098 \uc774\uc0c1\uc758 \ub370\uc774\ud130\ub97c \uc7a0\uadfc \uc0c1\ud0dc\uc5d0\uc11c \ub2e4\ub978 \ub370\uc774\ud130\uc758 \uc7a0\uae08\uc744 \uc5bb\uae30 \uc704\ud574 \ub300\uae30\ud558\uace0 \uc788\ub294 \uacbd\uc6b0 \uc810\uc720\uc640 \ub300\uae30 \uc870\uac74\uc774 \ub9cc\uc871\ub429\ub2c8\ub2e4. \uc989, \ud2b8\ub79c\uc7ad\uc158\uc774 \uc790\uc2e0\uc774 \uc810\uc720\ud55c \ub370\uc774\ud130\ub97c \uc720\uc9c0\ud55c \uc0c1\ud0dc\uc5d0\uc11c \ub2e4\ub978 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \uc7a0\uae08\uc744 \uae30\ub2e4\ub9ac\uace0 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\ube44\uc120\uc810(Non-Preemption): MySQL\uc5d0\uc11c\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \ud2b8\ub79c\uc7ad\uc158\uc774 \ub2e4\ub978 \ud2b8\ub79c\uc7ad\uc158\uc774 \uc810\uc720\ud55c \ub370\uc774\ud130\uc758 \uc7a0\uae08\uc744 \uac15\uc81c\ub85c \ud574\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub530\ub77c\uc11c \ube44\uc120\uc810 \uc870\uac74\uc774 \ub9cc\uc871\ub429\ub2c8\ub2e4.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\uc21c\ud658 \ub300\uae30(Circular Wait): \ub450 \uac1c \uc774\uc0c1\uc758 \ud2b8\ub79c\uc7ad\uc158\uc774 \uac01\uac01 \uc11c\ub85c\uac00 \uae30\ub2e4\ub9ac\ub294 \ub370\uc774\ud130\uc758 \uc7a0\uae08\uc744 \ubcf4\uc720\ud574\uc57c \uc21c\ud658 \ub300\uae30 \uc870\uac74\uc774 \ub9cc\uc871\ub429\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uba74, \ud2b8\ub79c\uc7ad\uc158 A\uac00 \ub370\uc774\ud130 X\uc758 \uc7a0\uae08\uc744 \uae30\ub2e4\ub9ac\uace0, \ud2b8\ub79c\uc7ad\uc158 B\ub294 \ub370\uc774\ud130 Y\uc758 \uc7a0\uae08\uc744 \uae30\ub2e4\ub9ac\uba70, \ud2b8\ub79c\uc7ad\uc158 C\ub294 \ub370\uc774\ud130 Z\uc758 \uc7a0\uae08\uc744 \uae30\ub2e4\ub9ac\ub294 \uc0c1\ud0dc\uac00 \ubc1c\uc0dd\ud55c\ub2e4\uba74 \uc21c\ud658 \ub300\uae30 \uc870\uac74\uc774 \uc131\ub9bd\ud569\ub2c8\ub2e4."))),(0,r.kt)("p",null,"\uc0ac\uc2e4 \uae30\ubcf8 \ucef4\ud4e8\ud130 \uc2dc\uc2a4\ud15c\uc758 dead Lock\uacfc \uc720\uc0ac\ud55c \uc870\uac74\uc785\ub2c8\ub2e4. \uc774 \ubd80\ubd84\uc744 \ubaa8\ub450 \ub9cc\uc871\ud574\uc57c \ub370\ub4dc\ub77d\uc774 \ubc1c\uc0dd\ud569\ub2c8\ub2e4.\n\ud558\ub098\uc529 \uc54c\uc544\ubcf4\uaca0\uc2b5\ub2c8\ub2e4. \uba3c\uc800 \uac1c\ubc1c \uc11c\ubc84\uc5d0\uc11c \ubc1c\uc0dd\ud55c \ub370\ub4dc\ub77d\uc73c\ub85c \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"*** (1) TRANSACTION:\nTRANSACTION 1000560, ACTIVE 373 sec inserting\nmysql tables in use 1, Locked 1\nLock WAIT 3 Lock struct(s), heap size 1128, 9 row Lock(s), undo log entries 328\nMySQL thread id 860, OS thread handle 281472107409376, query id 2958720 update\nINSERT INTO charger_status (station_id, charger_id, latest_update_time, charger_state) VALUES ('ST414511', '01', '2023-07-21 08:27:43', 'CHARGING_IN_PROGRESS') ON DUPLICATE KEY UPDATE latest_update_time = '2023-07-21 08:27:43', charger_state = 'CHARGING_IN_PROGRESS'\n\n*** (1) HOLDS THE Lock(S):\nRECORD LockS space id 64 page no 742 n bits 424 index PRIMARY of table `charge`.`charger_status` trx id 1000560 Lock_mode X Locks rec but not gap\n\n\n-------------------------------------------------------------------------\n*** (2) TRANSACTION:\nTRANSACTION 946331, ACTIVE 507 sec inserting\nmysql tables in use 1, Locked 1\nLock WAIT 4 Lock struct(s), heap size 1323, 12 row Lock(s), undo log entries 432\nMySQL thread id 859, OS thread handle 281472629186528, query id 3017483 update\nINSERT INTO charger_status (station_id, charger_id, latest_update_time, charger_state) VALUES ('ST412801', '11', '2023-07-21 10:48:20', 'CHARGING_IN_PROGRESS') ON DUPLICATE KEY UPDATE latest_update_time = '2023-07-21 10:48:20', charger_state = 'CHARGING_IN_PROGRESS'\n\n*** (2) HOLDS THE Lock(S):\nRECORD LockS space id 64 page no 718 n bits 208 index PRIMARY of table `charge`.`charger_status` trx id 946331 Lock_mode X Locks rec but not gap\n")),(0,r.kt)("p",null,"1\ubc88 \ud2b8\ub79c\uc7ad\uc158 1000560\uc774 charge_status \ud14c\uc774\ube14\uc5d0 insert ",(0,r.kt)("del",{parentName:"p"},"~ on duplicate key update ~")," \ucffc\ub9ac\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\uae30 \uc704\ud574 ",(0,r.kt)("inlineCode",{parentName:"p"},"space id 64 page no 742 n bits 424 index PRIMARY of table"),"  \uc5d0 X Lock\uc744 \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4\n\uadf8\ub9ac\uace0 2\ubc88 \ud2b8\ub79c\uc7ad\uc158 946331 \ub3c4 \ub611\uac19\uc740 \ud14c\uc774\ube14\uc5d0 \ube44\uc2b7\ud55c \ucffc\ub9ac\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\ub824\uace0 \ud569\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \ud574\ub2f9 \ud2b8\ub79c\uc7ad\uc158\ub3c4 X Lock\uc744 \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"\uc800\ud76c-\ud300\uc5d0-\ub370\ub4dc\ub77d\uc774-\ubc1c\uc0dd\ud55c-\uc774\uc720"},"\uc800\ud76c \ud300\uc5d0 \ub370\ub4dc\ub77d\uc774 \ubc1c\uc0dd\ud55c \uc774\uc720"),(0,r.kt)("p",null,"\uba3c\uc800 \uc800\ud76c \ud300\uc740 \uacf5\uacf5 API\ub97c \ud1b5\ud574 \uc804\uae30\ucc28 \ucda9\uc804\uc18c \uc815\ubcf4\ub97c cron\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8 \ud574\uc8fc\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\uadf8\ub9ac\uace0 \ucda9\uc804\uae30\uc758 \uc0c1\ud0dc\ub3c4 \uc8fc\uae30\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8 \ud574\uc8fc\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\ucda9\uc804\uc18c \uc815\ubcf4\ub97c \uac31\uc2e0\ud560 \uacbd\uc6b0 \uc0c8\ub85c \uc0dd\uae34 \ucda9\uc804\uc18c\uac00 \uc788\ub2e4\uba74 \ucd94\uac00\ud574\uc918\uc57c\ud558\uace0, \uc0c8\ub85c \uc0dd\uae34 \ucda9\uc804\uc18c\uac00 \uc788\ub2e4\uba74 \uc0c8\ub85c\uc6b4 \ucda9\uc804\uae30\uac00 \uc788\uc744\ud14c\uace0, \uadf8\uc5d0\ub530\ub978 \ucda9\uc804\uae30 \uc0c1\ud0dc\ub3c4 \ucd94\uac00\ud574\uc918\uc57c\ud569\ub2c8\ub2e4.\n\uadf8\ub9ac\uace0 \uc6d0\ub798 \uc788\ub358 \ucda9\uc804\uc18c\uc758 \uc815\ubcf4\uac00 \ubc14\ub00c\ub294 \uac83\uc5d0 \ub300\ud574\uc11c\ub3c4 \uc5c5\ub370\uc774\ud2b8 \ud574\uc918\uc57c\ud569\ub2c8\ub2e4. \uc774\ub807\uac8c \ub41c\ub2e4\uba74 \uc5ec\ub7ec\ubc88\uc758 \ubd84\uae30 \ucc98\ub9ac\ub85c application \ub808\ubca8\uc5d0\uc11c \ud574\uacb0\ud558\ub294 \uac83\uc774 \ub098\uc744\uc9c0 \ud639\uc740 mysql\uc758 \ubb38\ubc95 \uc911 ",(0,r.kt)("inlineCode",{parentName:"p"},"INSERT ~~ ON DUPLICATE KEY UPDATE ~~"),"\uc744 \uc774\uc6a9\ud560\uae4c \uace0\ubbfc\uc744 \ud588\uc5c8\ub294\ub370\uc694."),(0,r.kt)("p",null,"\uadf8 \uc911 \ud6c4\uc790\ub97c \ud0dd\ud55c \uc774\uc720\ub97c \ub9d0\uc500\ub4dc\ub9ac\uaca0\uc2b5\ub2c8\ub2e4. \ucda9\uc804\uae30\uc758 \uc815\ubcf4\ub294 \ud558\ub8e8\uc5d0 \uacf5\uacf5 API\ub97c \uc694\uccad\ud560 \uc218 \uc788\ub294 key \uc81c\ud55c\uc774 \uc788\uace0 \uc9c0\ub3c4 \uae30\ubc18\uc73c\ub85c \uac80\uc0c9\ud560 \uc218 \uc788\ub294 \uc870\uac74\uc774 \uc5c6\uae30 \ub54c\ubb38\uc5d0 \uc2e4\uc2dc\uac04\uc73c\ub85c \uc694\uccad\ud560 \uc218 \uc5c6\ub294 \uad6c\uc870\uc785\ub2c8\ub2e4.\n\uadf8\ub798\uc11c \uc694\uccad key \uc81c\ud55c\uc744 \ub118\uc9c0 \uc54a\ub294 \uc120\uc5d0\uc11c \uc790\uc8fc \uc694\uccad\uc744 \ud574\uc57c\ud569\ub2c8\ub2e4. \uadf8\ub807\uac8c\ud574\uc57c \uc0ac\uc6a9\uc790\uc5d0\uac8c \uc815\ubcf4\uc5d0 \ub300\ud55c \uc2e0\ub8b0\ub97c \uc904 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub530\ub77c\uc11c \uc790\uc8fc \uc694\uccad\ub418\ub294 \uc791\uc5c5\uc5d0 Application \ub808\ubca8\uc5d0\uc11c \uad6c\ud604\ud55c\ub2e4\uba74, findAll() \uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 23\ub9cc\uac74\uc758 \ucda9\uc804\uae30 \uc0c1\ud0dc \uc815\ubcf4\ub97c \uba54\ubaa8\ub9ac\uc5d0 \ub85c\ub529\ud569\ub2c8\ub2e4. \uadf8\ub9ac\uace0 api\uc758 \uc694\uccad\uc744 \ud1b5\ud574 \uc5bb\uc740 23\ub9cc+n\uac74\uc758 \ucda9\uc804\uae30 \uc0c1\ud0dc \uc815\ubcf4\ub97c \uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub9bd\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uadf8\ub9ac\uace0 \ud574\ub2f9 \uc815\ubcf4\uac00 \uc788\ub294\uc9c0 \ube44\uad50\ud569\ub2c8\ub2e4. \ud574\ub2f9 \uc815\ubcf4\uac00 findAll()\ub85c \ucc3e\uc544\uc628 list\uc5d0 \uc5c6\uc73c\uba74 Insert, \ud574\ub2f9 \uc815\ubcf4\uac00 \uc788\ub2e4\uba74 update\ub97c \ud1b5\ud574 \uac31\uc2e0\ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uc774\ub807\uac8c \ud55c\ub2e4\uba74 \ucd1d batch Insert, Update\ub97c \ud1b5\ud574 2\ubc88\uc758 \ucffc\ub9ac + 46\ub9cc n\uac74\uc758 \ucda9\uc804\uae30 \uc815\ubcf4\ub97c \uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub824 \ube44\uad50\ud558\ub294 \uc5f0\uc0b0\uc774 \uc0dd\uae38 \uac83 \uc785\ub2c8\ub2e4.\n\ud558\uc9c0\ub9cc  ",(0,r.kt)("inlineCode",{parentName:"p"},"INSERT ~~ ON DUPLICATE KEY UPDATE ~~")," \ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 batch insert\ub97c \ud1b5\ud574 1\ubc88\uc758 \ucffc\ub9ac\ub85c \ud574\uacb0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uba54\ubaa8\ub9ac\uc5d0 \ub370\uc774\ud130\ub3c4 \uc801\uc7ac\ud558\uc9c0 \uc54a\uace0 \ub9d0\uc774\uc8e0."),(0,r.kt)("p",null,"\ud558\uc9c0\ub9cc \ubcf4\uc168\ub358 \uac83\uacfc \uac19\uc774 \ub370\ub4dc\ub77d\uc774 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.  \uc774\uc720\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"INSERT ~~ ON DUPLICATE KEY UPDATE ~~")," \uc758 \ud2b9\uc218\ud55c Lock mechanism \ub54c\ubb38\uc785\ub2c8\ub2e4. \ud574\ub2f9 \ucffc\ub9ac\ub294"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\uba3c\uc800 \uc0bd\uc785\ud558\ub824\ub294 \ud589\uc774 \ud14c\uc774\ube14\uc5d0 \uc874\uc7ac\ud558\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"\uadf8\ub9ac\uace0 \uc77d\uc740 record\uc5d0 \ub300\ud574 S Lock\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"\uadf8\ub9ac\uace0 \ud574\ub2f9 record\uac00 duplicate key\ub77c\ub294 \uc870\uac74\uc774\ub77c\uba74 X Lock\uc744 \uc124\uc815\ud569\ub2c8\ub2e4.")),(0,r.kt)("p",null,"\uc774\ub7f0 \ubc29\uc2dd\uc73c\ub85c \uc791\ub3d9\ud558\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.\n\uc774\ub7f0 \ubc29\uc2dd\uc774 \uc65c \ubb38\uc81c\uac00 \ub420 \uc218 \uc788\ub294\uc9c0 \uc54c\uc544\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\n\uba3c\uc800 \uc790\uc2e0\uc774 \uc77d\uc740 record\uc5d0 S Lock\uc744 \uac01\uac01\uc758 \ud2b8\ub79c\uc7ad\uc158\uc774 \uc124\uc815\ud569\ub2c8\ub2e4.\n\uadf8\ub9ac\uace0 \uc5c5\ub370\uc774\ud2b8\ub97c \ud558\uae30\uc704\ud574 record\uc5d0 X Lock\uc744 \uc124\uc815\ud558\ub824\uace0 \ud569\ub2c8\ub2e4. \ud558\uc9c0\ub9cc \uac01\uac01\uc758 \ud2b8\ub79c\uc7ad\uc158\uc774 \uc11c\ub85c S Lock\uc744 \uc124\uc815\ud588\uae30 \ub54c\ubb38\uc5d0 S Lock\uc744 \ubc18\ub0a9\ud558\uace0 X Lock\uc744 \uc124\uc815\ud558\ub824\uace0 \ud574\ub3c4 \ub450 \ud2b8\ub79c\uc7ad\uc158 \ubaa8\ub450 \uae30\ub2e4\ub9ac\ub294 \ub370\ub4dc\ub77d \uc0c1\ud669\uc774 \ubc1c\uc0dd\ud558\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. \uc774\ub7f0 \uc0c1\ud669\uc774 \ub418\uba74 \uc544\uae4c \uc704\uc5d0\uc11c \ub9d0\uc500\ub4dc\ub838\ub358 \ub370\ub4dc\ub77d\uc758 \uc870\uac74 4\uac00\uc9c0\uac00 \ub2e4 \ub9cc\uc871\ud558\uace0 \ub370\ub4dc\ub77d\uc774 \ubc1c\uc0dd\ud569\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"\ud574\uacb0-\ubc29\uc548"},"\ud574\uacb0 \ubc29\uc548"),(0,r.kt)("p",null,"\ud574\uacb0 \ubc29\uc548\uc740 \uc5ec\ub7ec\uac00\uc9c0\uac00 \uc788\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uadf8 \uc911 \uc81c \uc218\uc900\uc5d0\uc11c \uc0dd\uac01\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc740 2\uac00\uc9c0\uac00 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\ud2b8\ub79c\uc7ad\uc158\uc744 \uc791\uac8c \ubd84\ub9ac\n\ud2b8\ub79c\uc7ad\uc158\uc744 \uc624\ub798 \uac00\uc9c0\uace0 \uc788\uc73c\uba74 Lock\uc744 \uac00\uc9c0\uace0 \uc788\ub294 \uc2dc\uac04\uc774 \uc624\ub798\uac78\ub9bd\ub2c8\ub2e4.\n\uadf8\ub798\uc11c \ud2b8\ub79c\uc7ad\uc158\uc744 \uc791\uac8c \ubd84\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \ud398\uc774\uc9d5\uc744 \ud1b5\ud574 \ud2b8\ub79c\uc7ad\uc158\uc744 \uc791\uac8c \ubd84\ub9ac\ud558\ub2e4\ubcf4\uba74 \ucffc\ub9ac\uac00 \uc5ec\ub7ec\ubc88 \ub098\uac00 \uc131\ub2a5\uc0c1 \ubb38\uc81c\uac00 \uc0dd\uae38 \uc218 \uc788\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"INSERT ~~ ON DUPLICATE KEY UPDATE ~~")," \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uae30\n\ud574\ub2f9 sql\uc774 \uc544\ub2cc ",(0,r.kt)("inlineCode",{parentName:"li"},"INSERT IGNORE"),"\uc744 \uc0ac\uc6a9\ud558\uc5ec \ucd94\uac00\ub41c \uc815\ubcf4\ub9cc \ub123\uace0, update\ub294 \ub2e4\ub978 \uc791\uc5c5\uc73c\ub85c \ubd84\ub9ac\ud558\uae30")),(0,r.kt)("p",null,"\uc774\ub7f0 \ubc29\ubc95\ub4e4\uc744 \uc0ac\uc6a9\ud558\uba74 \ub420 \uac83 \uac19\uc558\uc2b5\ub2c8\ub2e4. \uadf8 \uc911 \uc800\ub294 \ud604\uc7ac\ub294 \uac04\ub2e8\ud558\uac8c 2\ubc88\uc9f8 \ubc29\ubc95\uc774 \uc81c\uc77c \ub098\uc744 \uac83 \uac19\ub2e4\ub294 \uc0dd\uac01\uc5d0 \ucffc\ub9ac\ub97c \uc218\uc815\ud588\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uadf8\ub9ac\uace0 \ubb38\uc81c\ub97c \ud574\uacb0\ud588\uc2b5\ub2c8\ub2e4. \ud574\ub2f9 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\uac8c \ub418\uc5b4 \uc880 \ub354 \uc7ac\ubc0c\ub294 \uac83\ub4e4\uc744 \uace0\ubbfc\ud558\uace0 \uacf5\ubd80\ud560 \uc218 \uc788\ub294 \uc800\ud76c \ud300\uc5d0\uac8c \uac10\uc0ac\ud558\uace0 \ubaa8\ub974\ub294 \ud0a4\uc6cc\ub4dc\ub97c \ub9ce\uc774 \uc54c\ub824\uc900 \ub204\ub204\uc5d0\uac8c \uac10\uc0ac\ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uc544\uc9c1 \ubc30\uc6b0\ub294 \ub2e8\uacc4\ub77c \uc815\ud655\ud55c \uc815\ubcf4\uac00 \uc544\ub2d0 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ubd80\uc871\ud55c \ubd80\ubd84\uc5d0 \ub300\ud574 \ub9ce\uc740 \uc9c0\uc801 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4."))}u.isMDXComponent=!0}}]);