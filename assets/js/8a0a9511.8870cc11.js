"use strict";(self.webpackChunkcar_ffeine=self.webpackChunkcar_ffeine||[]).push([[3560],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>g});var a=n(67294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var s=a.createContext({}),c=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},u=function(t){var e=c(t.components);return a.createElement(s.Provider,{value:e},t.children)},p="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(t,e){var n=t.components,i=t.mdxType,r=t.originalType,s=t.parentName,u=l(t,["components","mdxType","originalType","parentName"]),p=c(n),m=i,g=p["".concat(s,".").concat(m)]||p[m]||d[m]||r;return n?a.createElement(g,o(o({ref:e},u),{},{components:n})):a.createElement(g,o({ref:e},u))}));function g(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l[p]="string"==typeof t?t:i,o[1]=l;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},22269:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=n(87462),i=(n(67294),n(3905));const r={slug:34,title:"\uce90\uc2dc\uc640 \uc774\ubd84 \ud0d0\uc0c9\uc73c\ub85c \uc870\ud68c \uc131\ub2a5 \uac1c\uc120\ud558\uae30",authors:["boxster"],tags:["java"]},o=void 0,l={permalink:"/34",source:"@site/blog/2023-09-17-caching.mdx",title:"\uce90\uc2dc\uc640 \uc774\ubd84 \ud0d0\uc0c9\uc73c\ub85c \uc870\ud68c \uc131\ub2a5 \uac1c\uc120\ud558\uae30",description:"\uc548\ub155\ud558\uc138\uc694 \ubc15\uc2a4\ud130\uc785\ub2c8\ub2e4",date:"2023-09-17T00:00:00.000Z",formattedDate:"2023\ub144 9\uc6d4 17\uc77c",tags:[{label:"java",permalink:"/tags/java"}],readingTime:12.495,hasTruncateMarker:!1,authors:[{name:"\ubc15\uc2a4\ud130",title:"Backend",url:"https://github.com/drunkenhw",imageURL:"https://github.com/drunkenhw.png",key:"boxster"}],frontMatter:{slug:"34",title:"\uce90\uc2dc\uc640 \uc774\ubd84 \ud0d0\uc0c9\uc73c\ub85c \uc870\ud68c \uc131\ub2a5 \uac1c\uc120\ud558\uae30",authors:["boxster"],tags:["java"]},nextItem:{title:"\ud63c\uc7a1\ub3c4 \uc870\ud68c \uc18d\ub3c4\ub97c \ud30c\ud2f0\uc154\ub2dd\uacfc \uc778\ub371\uc2a4\ub85c \uac1c\uc120\ud574\ubcf4\uae30",permalink:"/33"}},s={authorsImageUrls:[void 0]},c=[{value:"\uc774 \uae00\uc744 \uc4f0\ub294 \uc774\uc720",id:"\uc774-\uae00\uc744-\uc4f0\ub294-\uc774\uc720",level:2},{value:"\uacb0\ub860",id:"\uacb0\ub860",level:2},{value:"Caching",id:"caching",level:2},{value:"\uce90\uc2f1 \uc801\uc6a9\ud558\uae30",id:"\uce90\uc2f1-\uc801\uc6a9\ud558\uae30",level:2},{value:"\uce90\uc2f1\ud560 \uc815\ubcf4 \uac00\uc838\uc624\uae30",id:"\uce90\uc2f1\ud560-\uc815\ubcf4-\uac00\uc838\uc624\uae30",level:3},{value:"\ubc94\uc704 \uac80\uc0c9\ud558\uae30",id:"\ubc94\uc704-\uac80\uc0c9\ud558\uae30",level:3},{value:"\uc2e4\uc2dc\uac04\uc774 \uc911\uc694\ud55c \ub370\uc774\ud130\ub294?",id:"\uc2e4\uc2dc\uac04\uc774-\uc911\uc694\ud55c-\ub370\uc774\ud130\ub294",level:2},{value:"\uacb0\ub860",id:"\uacb0\ub860-1",level:2}],u={toc:c},p="wrapper";function d(t){let{components:e,...n}=t;return(0,i.kt)(p,(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"\uc548\ub155\ud558\uc138\uc694 \ubc15\uc2a4\ud130\uc785\ub2c8\ub2e4"),(0,i.kt)("h2",{id:"\uc774-\uae00\uc744-\uc4f0\ub294-\uc774\uc720"},"\uc774 \uae00\uc744 \uc4f0\ub294 \uc774\uc720"),(0,i.kt)("p",null,"\uc774\uc804 \uae00\uc5d0\uc11c\ub3c4 \uacc4\uc18d \uc124\uba85\ud588\ub4ef\uc774 \uc870\ud68c \uc131\ub2a5\uc744 \ucd5c\ub300\ud55c \ube60\ub974\uac8c \ud558\ub294 \uac83\uc774 \uc800\ud76c \uc11c\ube44\uc2a4\uc5d0\uc11c \ud575\uc2ec\uc774\ub77c\uace0 \uc0dd\uac01\ud558\uae30 \ub54c\ubb38\uc5d0 \uc9c0\uae08\ub3c4 \uc608\uc804\uc5d0 \ube44\ud574 \ube68\ub77c\uc84c\uc9c0\ub9cc \ub2e4\ub978 \uac1c\uc120\uc810\uc774 \ubcf4\uc5ec \uac1c\uc120\uc744 \ud558\uace0\uc790\ud569\ub2c8\ub2e4."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://car-ffeine.github.io/31"},"\uc870\ud68c \uc131\ub2a5 \uac1c\uc120\ud558\uae30 1 (\uc778\ub371\uc2a4)")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://car-ffeine.github.io/32"},"\uc870\ud68c \uc131\ub2a5 \uac1c\uc120\ud558\uae30 2 (\ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubcf5\uc81c)")),(0,i.kt)("h2",{id:"\uacb0\ub860"},"\uacb0\ub860"),(0,i.kt)("p",null,"\uacb0\ub860\ubd80\ud130 \ub9d0\uc500\ub4dc\ub9ac\uba74 \ub85c\uceec\uc5d0\uc11c \uce90\uc2f1\uc744 \uc801\uc6a9\ud55c \ud6c4 100\uba85\uc758 \uc0ac\uc6a9\uc790\uac00 \uc9c0\ub3c4\uc758 \ub370\uc774\ud130\ub97c \uc870\ud68c\ud560 \ub54c\ub97c \uae30\uc900\uc73c\ub85c"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"TPS")," 78 -> 128"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response Time")," 1236 ms -> 751 ms"),(0,i.kt)("p",null,"\uc57d ",(0,i.kt)("strong",{parentName:"p"},"64%")," \uc131\ub2a5\uc774 \uac1c\uc120 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"(\uc800\ubc88 \uc131\ub2a5 \ud14c\uc2a4\ud2b8\uc758 \uacb0\uacfc\uac00 \ub2e4\ub978 \uc774\uc720\ub294 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc774 \ubcc0\uacbd\ub418\uc5b4 \uc870\ud68c \ubc29\uc2dd\uc774 \ubc14\ub00c\uc5c8\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. \uadf8\ub798\uc11c \uce90\uc2f1\uc744 \uc801\uc6a9\ud558\uae30\uc804, \ud55c \ud6c4 \ub97c \ube44\uad50\ud588\uc2b5\ub2c8\ub2e4.)")),(0,i.kt)("h2",{id:"caching"},"Caching"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"In computing, a cache is a hardware or software component that stores data so that future requests for that data can be served faster; the data stored in a cache might be the result of an earlier computation or a copy of data stored elsewhere.")),(0,i.kt)("p",null,"\uce90\uc2f1\uc740 \uc704\ud0a4 \ubc31\uacfc\uc5d0\uc11c \uc704\uc640 \uac19\uc774 \uc124\uba85\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc989 \uba54\ubaa8\ub9ac\uc5d0 \ub370\uc774\ud130\ub97c \ubcf5\uc0ac\ubcf8\uc744 \uc62c\ub824 \uc880 \ub354 \ube60\ub974\uac8c \ub370\uc774\ud130\uc5d0 \uc811\uadfc\ud558\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uce90\uc2f1\uc758 \ub2e8\uc810\uc740 \uc218\uc815, \uc0bd\uc785, \uc0ad\uc81c\uac00 \ub418\uc5c8\uc744 \ub54c, \uad00\ub9ac \ud3ec\uc778\ud2b8\uac00 \ub450 \uad70\ub370\uac00 \ub41c\ub2e4\ub294 \uc810\uc785\ub2c8\ub2e4. \ub9cc\uc57d \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\ub9cc \uc0c8\ub85c\uc6b4 \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uace0, \uce90\uc2dc\uc5d0\ub294 \uc800\uc7a5\ud574\uc8fc\uc9c0 \uc54a\ub294\ub2e4\uba74 \uc0ac\uc6a9\uc790\ub294 \uadf8 \uc815\ubcf4\ub97c \ubcfc \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ud558\uc9c0\ub9cc \uc800\ud76c \uc11c\ube44\uc2a4\uc5d0\uc11c \uc801\uc6a9\ud55c \uc774\uc720\ub294 \ucda9\uc804\uae30\uc758 \ucda9\uc804 \uc0c1\ud0dc (\ucda9\uc804 \uc911, \ub300\uae30\uc911, \uace0\uc7a5)\uc5d0 \ub300\ud55c \uc815\ubcf4\ub294 \ucd5c\uc2e0\ud654\uac00 \ub418\uc5b4\uc57c\ud558\uc9c0\ub9cc, \ucda9\uc804\uc18c\uc758 \uc774\ub984\uc774\ub77c\ub358\uc9c0, \uc704\uce58, \ub2e4\ub978 \uc815\ubcf4\ub4e4\uc740 \uc27d\uac8c \ubcc0\ud558\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 \ud574\ub2f9 \uc815\ubcf4\ub97c \uce90\uc2f1\ud55c\ub2e4\uba74 \uc88b\uc744 \uac83 \uac19\uc558\uc2b5\ub2c8\ub2e4."),(0,i.kt)("h2",{id:"\uce90\uc2f1-\uc801\uc6a9\ud558\uae30"},"\uce90\uc2f1 \uc801\uc6a9\ud558\uae30"),(0,i.kt)("p",null,"\uba3c\uc800 \uce90\uc2f1\uc744 \uc5b4\ub514\uc5d0\uc11c \ud558\ub294\uc9c0\ub3c4 \uc911\uc694\ud569\ub2c8\ub2e4. \ud06c\uac8c ",(0,i.kt)("strong",{parentName:"p"},"\ub85c\uceec \uce90\uc2dc"),"\uc640 ",(0,i.kt)("strong",{parentName:"p"},"\uae00\ub85c\ubc8c \uce90\uc2dc"),"\ub85c \ub098\ub20c \uc218 \uc788\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.\n\uae00\ub85c\ubc8c \uce90\uc2dc\uc758 \uc7a5\uc810\uc740 \uc2a4\ucf00\uc77c \uc544\uc6c3\uc744 \ud588\uc744 \ub54c, \ubaa8\ub4e0 \uc11c\ubc84\uac00 \ub2e4 \uac19\uc740 \ub370\uc774\ud130\ub97c \ubc14\ub77c\ubcf4\uae30 \ub54c\ubb38\uc5d0 \ub370\uc774\ud130 \uc815\ud569\uc131\uc774 \uc88b\uc544\uc9d1\ub2c8\ub2e4. \ud558\uc9c0\ub9cc \uc800\ud76c \uc11c\ube44\uc2a4\ub294 \ub2e8\uc77c \uc11c\ubc84\ub85c \uad6c\uc131\ub418\uc5b4 \uc788\uae30 \ub54c\ubb38\uc5d0, \ub85c\uceec \uce90\uc2dc\ub97c \ud574\ub3c4 \ubb38\uc81c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \uae00\ub85c\ubc8c \uce90\uc2dc\ub97c \uc801\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 Redis\ub098 Memcached \uac19\uc740 \ub3c4\uad6c\ub97c \ubaa8\ub4e0 \ud300\uc6d0\uc774 \uc54c\uc544\uc57c\ud558\uc9c0\ub9cc \ub85c\uceec \uce90\uc2dc\ub294 \uadf8\ub807\uac8c \ud558\uc9c0 \uc54a\ub354\ub77c\ub3c4 \ud3b8\ud558\uac8c \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4\ub294 \uc810\uc5d0\uc11c \ub85c\uceec\uc5d0 \uce90\uc2f1\ud558\ub294 \ubc29\ubc95\uc744 \uc801\uc6a9\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,i.kt)("h3",{id:"\uce90\uc2f1\ud560-\uc815\ubcf4-\uac00\uc838\uc624\uae30"},"\uce90\uc2f1\ud560 \uc815\ubcf4 \uac00\uc838\uc624\uae30"),(0,i.kt)("p",null,"\uce90\uc2f1\uc744 \ud558\uae30 \uc704\ud574\uc11c\ub294 \uba3c\uc800 \uce90\uc2f1\ud560 \ub370\uc774\ud130\ub97c \uac00\uc838\uc640\uc57c\ud569\ub2c8\ub2e4. \uc800\ud76c \uc11c\ube44\uc2a4\ub294 \ucd9c\uc7a5 \ud639\uc740 \uc5ec\ud589\uc744 \uac00\ub294 \uc804\uae30\ucc28 \uc624\ub108\uac00 \ud575\uc2ec \ud398\ub974\uc18c\ub098\uc774\uae30 \ub54c\ubb38\uc5d0 \uc0ac\uc6a9\uc790\ub4e4\uc774 \ucc3e\ub294 \uc815\ubcf4\uc758 \uc704\uce58\ub294 \ubd88\ud2b9\uc815\ud569\ub2c8\ub2e4. \uc11c\uc6b8\uc5d0\uc11c \ub2e4\ub978 \uc9c0\ubc29\uc73c\ub85c \ucd9c\uc7a5\uc744 \uac00\ub294 \uacbd\uc6b0\ub3c4 \uc788\uc744 \uac83\uc774\uace0, \uc9c0\ubc29\uc5d0\uc11c \uc11c\uc6b8\uc5d0 \uac00\ub294 \uacbd\uc6b0\ub3c4 \uc788\uae30 \ub54c\ubb38\uc5d0, \ubaa8\ub4e0 \ub370\uc774\ud130\ub97c \uce90\uc2f1\ud574\uc57c\ud560 \uac83\uc774\ub77c \ud310\ub2e8\ud588\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uadf8\ub798\uc11c \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uc2e4\ud589 \uc2dc\uc5d0 \ubaa8\ub4e0 \ucda9\uc804\uc18c\ub97c \uce90\uc2f1\ud558\uae30\ub85c \uc120\ud0dd\ud588\uc2b5\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'@Configuration\npublic class InitialStationCache implements ApplicationRunner {\n\n    private final StationCacheRepository stationCacheRepository;\n    private final StationQueryRepository stationQueryRepository;\n\n    @Override\n    public void run(ApplicationArguments args) {\n        log.info("Initialize station cache");\n        List<StationInfo> stations = stationQueryRepository.findAll();\n        stationCacheRepository.initialize(stations);\n        log.info("Station cache initialized");\n        log.info("Station cache size: {}", stations.size());\n    }\n}\n\n')),(0,i.kt)("p",null,"\uc704\uc640 \uac19\uc774 ApplicationRunner\ub97c \uad6c\ud604\ud558\uc5ec \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uc2e4\ud589 \uc2dc \ubaa8\ub4e0 \ucda9\uc804\uc18c\uc758 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub3c4\ub85d \ub9cc\ub4e4\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc5ec\uae30\uc11c Entity\uc778 Station\uc744 \uac00\uc838\uc624\uc9c0 \uc54a\uc740 \uc774\uc720\ub294 \ud06c\uac8c \ub450\uac00\uc9c0\uac00 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\uc9c0\ub3c4\ub85c \uc870\ud68c\ud558\ub294 \ubd80\ubd84\uc758 \uc131\ub2a5\uc744 \uac1c\uc120\ud558\uace0\uc790 \ud588\uc9c0\ub9cc, Entity\uc5d0\ub294 \uc9c0\ub3c4\ub97c \uc870\ud68c\ud560 \ub54c \ubd88\ud544\uc694\ud55c \uc815\ubcf4\ub3c4 \uc788\uae30 \ub54c\ubb38\uc5d0 \uba54\ubaa8\ub9ac\uc0c1\uc758 \ub0ad\ube44\uac00 \uc0dd\uae38 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("li",{parentName:"ol"},"Entity\ub97c \uce90\uc2f1\ud558\uac8c \ub41c\ub2e4\uba74 hibernate 1\ucc28 \uce90\uc2dc\uc5d0\ub3c4 \uc801\uc7ac\ub418\uace0, \ud799 \uba54\ubaa8\ub9ac\uc5d0\ub3c4 \uc801\uc7ac\ub418\ub294 \uc77c\uc774 \ubc1c\uc0dd\ud558\uc5ec \uba54\ubaa8\ub9ac\uc0c1 \ub0ad\ube44\ub77c\uace0 \uc0dd\uac01\ud588\uc2b5\ub2c8\ub2e4.")),(0,i.kt)("h3",{id:"\ubc94\uc704-\uac80\uc0c9\ud558\uae30"},"\ubc94\uc704 \uac80\uc0c9\ud558\uae30"),(0,i.kt)("p",null,"\ucda9\uc804\uc18c\uc758 \ub370\uc774\ud130\ub97c \uc870\ud68c\ud558\ub294 \uc870\uac74\uc740 \uc704\ub3c4, \uacbd\ub3c4\uc758 \ucd5c\uc18c, \ucd5c\ub300\uac12\uc744 \uae30\uc900\uc73c\ub85c \ub9cc\uc871\ud558\ub294 \ub370\uc774\ud130\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.\n\uc544\ub798\uc640 \uac19\uc774 \uac04\ub2e8\ud788 \uc870\uac74\uc744 stream()\uc758 filter()\ub97c \uc0ac\uc6a9\ud574\uc11c \uad6c\ud604\ud588\uc2b5\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"public class StationCacheRepository {\n\n    private final List<StationInfo> cachedStations;\n\n    public List<StationInfo> findByCoordinate(\n          BigDecimal minLatitude,\n          BigDecimal maxLatitude,\n          BigDecimal minLongitude,\n          BigDecimal maxLongitude\n  ) {\n   return cachedStations.stream()\n                .filter(it -> it.latitude().compareTo(minLatitude) >= 0 && it.latitude().compareTo(maxLatitude) <= 0)\n                .filter(it -> it.longitude().compareTo(minLongitude) >= 0 && it.longitude().compareTo(maxLongitude) <= 0)\n                .toList();\n  }\n}\n")),(0,i.kt)("p",null,"\ud558\uc9c0\ub9cc \ud574\ub2f9 \ubc29\ubc95\uc73c\ub85c \ub85c\uceec\uc5d0\uc11c \uc870\ud68c\ub97c \ud14c\uc2a4\ud2b8 \ud588\uc744 \ub54c \uce90\uc2dc\ub97c \uc801\uc6a9\ud55c \uac83\ubcf4\ub2e4 \ub354 \ub290\ub824\uc9c4 \uacb0\uacfc\uac00 \ub098\uc654\uc2b5\ub2c8\ub2e4.\n\uce90\uc2f1\uc744 \ud574\uc11c \ub370\uc774\ud130\ubca0\uc774\uc2a4\uae4c\uc9c0 \uc694\uccad\uc744 \ubcf4\ub0b4\uc9c0 \uc54a\ub294\ub370 \uc65c \ub354 \ub290\ub824\uc9c4 \uac83\uc77c\uae4c\uc694?"),(0,i.kt)("p",null,"\ub2f5\uc740 ",(0,i.kt)("strong",{parentName:"p"},"\uc778\ub371\uc2a4")," \uc600\uc2b5\ub2c8\ub2e4. Mysql \uc5d0\uc11c \uc778\ub371\uc2a4\ub294 B Tree\ub85c \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c\ub294 \uc704\ub3c4, \uacbd\ub3c4\ub85c \ubcf5\ud569 \uc778\ub371\uc2a4\uac00 \uc124\uc815\ub418\uc5b4 \uc788\uc5c8\uc9c0\ub9cc, \ud604\uc7ac \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \ub85c\uc9c1\uc5d0\ub294 \ud574\ub2f9 \ubd80\ubd84\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uadf8\ub798\uc11c filter\ub85c \uc21c\ud68c\ud558\ub294 \uc2dc\uac04\ubcf5\uc7a1\ub3c4\uac00 O(n)\uc774\uace0, \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c\ub294 O(log n)\uc774\uae30 \ub54c\ubb38\uc5d0 \ub354 \ub290\ub824\uc9c4 \uac83\uc785\ub2c8\ub2e4. \uadf8\ub807\ub2e4\uace0 \uc81c\uac00 \uc9c1\uc811 B tree \uc790\ub8cc\uad6c\uc870\ub97c \uc9c1\uc811 \uad6c\ud604\ud574\uc57c\ud560\uae4c\uc694?"),(0,i.kt)("p",null,"\ud604\uc7ac \ud574\ub2f9 \uc870\ud68c API\ub294 \uc704\ub3c4 \uacbd\ub3c4\ub85c \ubc94\uc704 \ud0d0\uc0c9\uc744 \ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uacb0\uad6d\uc5d4 station\uc758 \uc815\ubcf4\ub4e4\uc774 \uc704\ub3c4, \uacbd\ub3c4\ub85c \uc815\ub82c\ub9cc \ub418\uc5b4 \uc788\ub2e4\uba74 B tree\ub97c \uc9c1\uc811 \uad6c\ud604\ud558\uc9c0 \uc54a\ub354\ub77c\ub3c4 \uac19\uc740 \uc2dc\uac04\ubcf5\uc7a1\ub3c4 O(log n)\uc73c\ub85c \ud0d0\uc0c9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\ubb3c\ub860 B tree\uc640 \ub2e4\ub978 \ubd80\ubd84\uc740 \ud574\ub2f9 \ucda9\uc804\uc18c\uc758 \uc815\ud655\ud55c \uc704\ub3c4, \uacbd\ub3c4\ub85c \ub2e8\uc77c \uce7c\ub7fc\uc744 \uc870\ud68c\ud560 \ub54c\ub294 O(n)\uc774\uae30 \ub54c\ubb38\uc5d0 \uc774\ub7f0 \ubc29\ubc95\uc774 \ubb38\uc81c\uac00 \ub420 \uc218 \uc788\uc9c0\ub9cc, \ud574\ub2f9 \uce90\uc2dc \ub370\uc774\ud130\ub85c\ub294 \ubb34\uc870\uac74 \ubc94\uc704 \ud0d0\uc0c9\uc744 \ud558\uae30 \ub54c\ubb38\uc5d0, B tree\ub97c \uad6c\ud604\ud558\uc9c0 \uc54a\uace0 \uc774\ubd84 \ud0d0\uc0c9\uc73c\ub85c \uc870\ud68c\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c \ubcc0\uacbd\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"    public void initialize(List<StationInfo> stations) {\n        cachedStations.addAll(stations);\n        cachedStations.sort((o1, o2) -> {\n             int latitudeCompare = o1.latitude().compareTo(o2.latitude());\n             if (latitudeCompare == 0) {\n                  return o1.longitude().compareTo(o2.longitude());\n             }\n             return latitudeCompare;\n        });\n    }\n\n    private List<StationInfo> findStations(BigDecimal minLatitude, BigDecimal maxLatitude, BigDecimal minLongitude, BigDecimal maxLongitude) {\n        int lowerBound = binarySearch(minLatitude, START_INDEX);\n        int upperBound = binarySearch(maxLatitude, lowerBound);\n        if (lowerBound == -1 || upperBound == -1) {\n          return Collections.emptyList();\n        }\n        return cachedStations.stream()\n                      .skip(lowerBound)\n                      .limit(upperBound - lowerBound)\n                      .filter(station -> station.longitude().compareTo(minLongitude) >= 0 && station.longitude().compareTo(maxLongitude) <= 0)\n                      .toList();\n    }\n\n    private int binarySearch(BigDecimal latitude, int startIndex) {\n        int left = startIndex;\n        int right = cachedStations.size() - 1;\n        int result = -1;\n        while (left <= right) {\n            int middle = left + (right - left) / 2;\n            StationInfo middleStation = cachedStations.get(middle);\n            if (middleStation.latitude().compareTo(latitude) >= 0) {\n                result = middle;\n                right = middle - 1;\n            } else {\n                left = middle + 1;\n            }\n        }\n        return result;\n    }\n\n")),(0,i.kt)("p",null,"\uba3c\uc800 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc2e4\ud589\ub420 \ub54c cache \ub370\uc774\ud130\ub97c \ucc3e\uc544 \uc800\uc7a5\ud558\ub294 \uac83 \ubfd0\ub9cc \uc544\ub2c8\ub77c, \uc704\ub3c4(Latitude)\ub97c \uae30\uc900\uc73c\ub85c \uc815\ub82c\ud558\ub3c4\ub85d \ub9cc\ub4e4\uc5c8\uc2b5\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \uc704\ub3c4\uc758 \ucd5c\uc18c, \ucd5c\ub300\uac12\uc758 \uc778\ub371\uc2a4\ub97c \uac00\uc7a5 \ud6a8\uc728\uc801\uc73c\ub85c \ucc3e\uc544\uc62c \uc218 \uc788\ub3c4\ub85d binary search\ub97c \ud558\ub294 \uba54\uc11c\ub4dc\ub97c \ub9cc\ub4e4\uc5c8\uc2b5\ub2c8\ub2e4. \uc774\ub807\uac8c \ud55c\ub2e4\uba74 O(log n) \uc73c\ub85c \uc704\ub3c4\uc758 \ucd5c\ub300 \ucd5c\uc18c \uc870\uac74\uc5d0 \ud3ec\ud568\ub418\ub294 \ubaa8\ub4e0 station\uc758 \uac12\uc744 \uc870\ud68c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \uc870\ud68c\ud55c \ub370\uc774\ud130\ub4e4\uc758 \uac1c\uc218\ub9cc\ud07c filter\ub97c \ud1b5\ud574 \uacbd\ub3c4(longitude) \uac00 \ud3ec\ud568\ub418\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4. \ud574\ub2f9 \ubc29\uc2dd\uc758 \uad6c\ud604\uc740 B tree\uac00 \uc791\ub3d9\ud558\ub294 \ubc29\uc2dd\uacfc \uc720\uc0ac\ud560 \uac83\uc785\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uc774\ubd84 \ud0d0\uc0c9\uc744 \uc801\uc6a9\ud55c \uacb0\uacfc \ub85c\uceec\uc5d0\uc11c \uc751\ub2f5 \uc18d\ub3c4\uac00 120 ms -> 50 ~ 70 ms\ub85c \uc57d 2\ubc30 \ube68\ub77c\uc9c4 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("h2",{id:"\uc2e4\uc2dc\uac04\uc774-\uc911\uc694\ud55c-\ub370\uc774\ud130\ub294"},"\uc2e4\uc2dc\uac04\uc774 \uc911\uc694\ud55c \ub370\uc774\ud130\ub294?"),(0,i.kt)("p",null,"\uc55e\uc11c \ub9d0\uc500\ub4dc\ub838\ub2e4\uc2dc\ud53c \uc9c0\ub3c4\ub85c \ucda9\uc804\uc18c\ub97c \uc870\ud68c\ud560 \ub54c, \ucda9\uc804\uc18c\uc758 \uc815\ubcf4\ub4e4\uc5d0\ub294 \ubc14\ub00c\uc9c0 \uc54a\ub294 \uc815\ubcf4\ubfd0\ub9cc \uc544\ub2c8\ub77c, \ucd5c\uc2e0\ud654\ud574\uc57c\ud558\ub294 \ucda9\uc804\uae30\uc758 \ud604\uc7ac \uc0c1\ud0dc \uc815\ubcf4\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub7ec\ud55c \uc815\ubcf4\ub4e4\uc740 \uce90\uc2f1\ud574\ub458 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ud558\ub354\ub77c\ub3c4, \uad00\ub9ac \ud3ec\uc778\ud2b8\uac00 \ub298\uc5b4\ub098\uae30 \ub54c\ubb38\uc5d0 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \uce90\uc2f1\ud574\ub454 \ucda9\uc804\uae30 id\ub85c \ucda9\uc804\uae30\uc758 \uc0c1\ud0dc\ub97c \ucc3e\uc544\uc640\uc11c \uc815\ubcf4\ub97c \ud569\uccd0 \ubc18\ud658\ud558\ub294 \uc2dd\uc73c\ub85c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"    select cs.station_id,\n           sum(case\n                   when cs.charger_condition = 'STANDBY' then 1\n                   else 0\n               end)\n    from charger_status cs\n    where cs.station_id in (?, ?, ?, ?, ?, ?, ?)\n    group by cs.station_id\n")),(0,i.kt)("p",null,"\uc704\uc640 \uac19\uc740 \ucffc\ub9ac\ub85c \ud574\ub2f9 \ucda9\uc804\uc18c\uc758 \ucd5c\uc2e0\ud654\ub41c \ucda9\uc804\uae30 \uc0c1\ud0dc\ub97c \uac00\uc838\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uce90\uc2f1\uc744 \ud558\uae30\uc804\uc5d0 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc774\uc6a9\ud574 \ub370\uc774\ud130\ub97c \uac00\uc838\uc62c \ub54c\uc758 \ucffc\ub9ac\ub294 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"}," select\n        distinct s.station_id\n    from\n        charge_station s\n    inner join\n        charger c\n            on (\n                c.station_id=s.station_id\n            )\n    where\n        s.latitude>=?\n        and s.latitude<=?\n        and s.longitude>=?\n        and s.longitude<=?\n -------------------------------------------------\n    select\n        s.station_id,\n        s.station_name,\n        s.latitude,\n        s.longitude,\n        s.is_parking_free,\n        s.is_private,\n        sum(case\n            when cs.charger_condition='STANDBY' then 1\n            else 0\n        end),\n        sum(case\n            when c.capacity>=50 then 1\n            else 0\n        end)\n    from\n        charge_station s\n    inner join\n        charger c\n            on (\n                c.station_id=s.station_id\n            )\n    inner join\n        charger_status cs\n            on (\n                c.station_id=cs.station_id\n                and c.charger_id=cs.charger_id\n            )\n    where\n        s.station_id in (\n            ?,?,?,?\n        )\n    group by\n        s.station_id\n")),(0,i.kt)("p",null,"\uc6d0\ub798\ub294 \uc704\uc640 \uac19\uc774 \uc5ec\ub7ec\ubc88\uc758 Join\uc744 \ud558\uace0, 2\ubc88\uc758 \ucffc\ub9ac\uac00 \ub098\uac14\ub358 \ubc18\uba74 \uc9c0\uae08\uc740 join\uc744 \ud558\uc9c0\uc54a\ub294 \ud55c\ubc88\uc758 \uae54\ub054\ud55c \ucffc\ub9ac\ub85c \uac1c\uc120\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uadf8\ub9ac\uace0 ",(0,i.kt)("strong",{parentName:"p"},"station \ud14c\uc774\ube14\uc758 \uc704\ub3c4, \uacbd\ub3c4\ub85c \ubc94\uc704 \ud0d0\uc0c9\uc744 \uc704\ud574 \uc0dd\uc131\ud588\ub358 index\ub3c4 \uc81c\uac70"),"\ud560 \uc218 \uc788\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),(0,i.kt)("h2",{id:"\uacb0\ub860-1"},"\uacb0\ub860"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\uce90\uc2f1\ud560 \uc218 \uc788\ub294 \ubd80\ubd84\uc740 \ud558\ub294 \uac83\ub3c4 \uc88b\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4"),(0,i.kt)("li",{parentName:"ol"},"\uc2dc\uac04 \ubcf5\uc7a1\ub3c4\ub97c \uacc4\uc0b0\ud574\ubd05\uc2dc\ub2e4."),(0,i.kt)("li",{parentName:"ol"},"\uc131\ub2a5 \uac1c\uc120 \uc7ac\ubc0c\uc2b5\ub2c8\ub2e4.")))}d.isMDXComponent=!0}}]);